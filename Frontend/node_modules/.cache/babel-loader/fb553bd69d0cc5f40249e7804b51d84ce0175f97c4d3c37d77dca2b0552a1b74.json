{"ast":null,"code":"import React,{useState}from\"react\";import{useNavigate}from\"react-router-dom\";// Importar useNavigate para redirecionamento\nimport\"./cadastro.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export function Cadastro(){const[formData,setFormData]=useState({email:\"\",senha:\"\",nome:\"\"});const navigate=useNavigate();// Hook para navegação\nconst handleChange=event=>{setFormData({...formData,[event.target.name]:event.target.value});};const handleSubmit=async event=>{event.preventDefault();const usuario={email:formData.email,senha:formData.senha,nome:formData.nome};try{const response=await fetch(\"/api/usuarios\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(usuario)});if(response.ok){const data=await response.json();console.log(\"Usuário criado:\",data);// Supondo que o backend retorna um token após o cadastro\nconst token=data.token;// Altere se o token estiver em outro formato ou estrutura\nif(token){// Salvar o token no localStorage\nlocalStorage.setItem(\"authToken\",token);// Redirecionar para a página do Gerenciador\nnavigate(\"/gerenciador\");// Substitua pelo caminho correto para o Gerenciador\n}}else{console.error(\"Erro ao criar usuário:\",response.statusText);}}catch(error){console.error(\"Erro na requisição:\",error);}};return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Email:\",/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",value:formData.email,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Senha:\",/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"senha\",value:formData.senha,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Nome:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"nome\",value:formData.nome,onChange:handleChange})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Cadastrar\"})]});}","map":{"version":3,"names":["React","useState","useNavigate","jsx","_jsx","jsxs","_jsxs","Cadastro","formData","setFormData","email","senha","nome","navigate","handleChange","event","target","name","value","handleSubmit","preventDefault","usuario","response","fetch","method","headers","body","JSON","stringify","ok","data","json","console","log","token","localStorage","setItem","error","statusText","onSubmit","children","type","onChange"],"sources":["/workspaces/wbProjectH2/Frontend/src/Cadastro.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\"; // Importar useNavigate para redirecionamento\nimport \"./cadastro.css\";\n\nexport function Cadastro() {\n  const [formData, setFormData] = useState({\n    email: \"\",\n    senha: \"\",\n    nome: \"\",\n  });\n\n  const navigate = useNavigate(); // Hook para navegação\n\n  const handleChange = (event) => {\n    setFormData({\n      ...formData,\n      [event.target.name]: event.target.value,\n    });\n  };\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n\n    const usuario = {\n      email: formData.email,\n      senha: formData.senha,\n      nome: formData.nome,\n    };\n\n    try {\n      const response = await fetch(\"/api/usuarios\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(usuario),\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        console.log(\"Usuário criado:\", data);\n\n        // Supondo que o backend retorna um token após o cadastro\n        const token = data.token; // Altere se o token estiver em outro formato ou estrutura\n        if (token) {\n          // Salvar o token no localStorage\n          localStorage.setItem(\"authToken\", token);\n\n          // Redirecionar para a página do Gerenciador\n          navigate(\"/gerenciador\"); // Substitua pelo caminho correto para o Gerenciador\n        }\n      } else {\n        console.error(\"Erro ao criar usuário:\", response.statusText);\n      }\n    } catch (error) {\n      console.error(\"Erro na requisição:\", error);\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <label>\n        Email:\n        <input\n          type=\"email\"\n          name=\"email\"\n          value={formData.email}\n          onChange={handleChange}\n        />\n      </label>\n      <label>\n        Senha:\n        <input\n          type=\"password\"\n          name=\"senha\"\n          value={formData.senha}\n          onChange={handleChange}\n        />\n      </label>\n      <label>\n        Nome:\n        <input\n          type=\"text\"\n          name=\"nome\"\n          value={formData.nome}\n          onChange={handleChange}\n        />\n      </label>\n      <button type=\"submit\">Cadastrar</button>\n    </form>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}